---
import PopupMenuHeader from '../components/PopupMenuHeader.astro';
import PopupMenuFooter from '../components/PopupMenuFooter.astro';
import PopupLogin from '../components/PopupLogin.astro';
import PopupProfileTel from '../components/PopupProfileTel.astro';
import PopupProfileName from '../components/PopupProfileName.astro';
import PopupFilters from '../components/PopupFilters.astro';

import type {IPopupFilter, IProfileInfo} from '../interfaces';

interface Props {
  page: string;
  isUser: boolean;
  userInfo?: IProfileInfo;
  popupFilter?: IPopupFilter;
}

const {page, isUser, userInfo, popupFilter}: Props = Astro.props;
---

<aside class="popups" data-popup-backdrop hidden>
  <link rel="stylesheet" href="./components/popups.css"/>

  <PopupMenuHeader/>

  <PopupMenuFooter/>

  {!isUser &&
    <PopupLogin/>}

  {isUser && userInfo && 'profile' === page &&
    <PopupProfileTel userInfo={userInfo}/>}

  {isUser && userInfo && 'profile' === page &&
    <PopupProfileName userInfo={userInfo}/>}

  {popupFilter &&
    <PopupFilters popupFilter={popupFilter}/>}

  <script src="./components/popups.js" is:inline async></script>
</aside>
