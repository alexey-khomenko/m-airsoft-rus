---
import PopupMenuHeader from '../components/PopupMenuHeader.astro';
import PopupMenuFooter from '../components/PopupMenuFooter.astro';
import PopupLogin from '../components/PopupLogin.astro';
import PopupProfileTel from '../components/PopupProfileTel.astro';
import PopupProfileName from '../components/PopupProfileName.astro';
import PopupFilters from '../components/PopupFilters.astro';

import type {IFilter, IPopupFilter} from '../interfaces';

interface Props {
  page: string;
  popupFilter?: IPopupFilter;
  isUser: boolean;
}

const {page, popupFilter, isUser}: Props = Astro.props;
---

<aside class="popups" data-popup-backdrop hidden="hidden">
  <link rel="stylesheet" href="./components/popups.css"/>

  <PopupMenuHeader/>

  <PopupMenuFooter/>

  {!isUser &&
    <PopupLogin/>}

  {isUser && 'profile' === page &&
    <PopupProfileTel/>}

  {isUser && 'profile' === page &&
    <PopupProfileName/>}

  {['search', 'catalog-section', 'favourite'].includes(page) &&
    <PopupFilters popupFilter={popupFilter}/>}

  <script src="./components/popups.js" is:inline async></script>
</aside>
